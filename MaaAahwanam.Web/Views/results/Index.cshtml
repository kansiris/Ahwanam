
@{
    ViewBag.Title = "::Search Results ::";
    Layout = "~/Views/SharedWeb/UserModuleMasterPage.cshtml";
}

@*<style>
        /* Cosmetic only */
    #easyPaginate {width:300px;}
    #easyPaginate img {display:block;margin-bottom:10px;}
    .easyPaginateNav a {padding:5px;}
    .easyPaginateNav a.current {font-weight:bold;text-decoration:underline;}
    </style>*@
<style>
    .nice-select, .list {
        width: 370px;
    }
</style>



<main>

    <section class="hero_in tours">
        <div class="wrapper">
            <div class="container">
                <h1 class="fadeInUp"><span></span>Available Vendors</h1>
            </div>
        </div>
    </section>
    <!--/hero_in-->

    <div class="container margin_60_35">
        <form method="post">
            <div class="col-lg-12">
                <div class="row no-gutters custom-search-input-2 inner">
                    <div class="col-lg-2">
                        <div class="form-group">
                            <input class="form-control" type="text" placeholder="Location" value="Hyderabad" required>
                            <i class="icon_pin_alt"></i>
                        </div>
                    </div>

                    <div class="col-lg-4">
                        <select class="form-control" required id="selectevent">
                            <option>Select Event</option>
                            <option>Wedding</option>
                            <option>Party</option>
                            <option>Corporate</option>
                            <option>Baby Function</option>
                            <option>Birthday</option>
                            <option>Engagement</option>
                        </select>
                        @*<div class="form-group">
                                <input class="form-control" type="text" placeholder="What Type of Event?" required>

                                <i class="icon-arrow-down"></i>
                            </div>*@
                    </div>
                    <div class="col-lg-2">
                        <div class="form-group">
                            <input class="form-control" type="number" placeholder="Guests" required>
                            <i class="icon_calendar"></i>
                        </div>
                    </div>
                    <div class="col-lg-2">
                        <div class="form-group">
                            <input class="form-control" id="datetimepicker1" type="text" name="dates" placeholder="Date?" required>
                            @*<i class="icon_calendar"></i>*@
                        </div>
                    </div>
                    <div class="col-lg-2">
                        <input type="submit" class="btn_search" value="Search">
                    </div>
                </div>
                <!-- /row -->
            </div>
        </form>
    </div>



    @*<div class="filters_listing sticky_horizontal">
            <div class="container">
                <ul class="clearfix">
                    <li>
                    </li>
                    <li>
                        <div class="layout_view">
                            <a href="#0" class="active"><i class="icon-th"></i></a>
                            <a href="tours-list-sidebar.html"><i class="icon-th-list"></i></a>
                        </div>
                    </li>
                    <li>
                        <div class="custom-search-input-2 inner-2">
                            <div class="form-group">
                                <input type="text" class="form-control" value="Search By Vendor Name" style="width:300px" /><i class="icon_search" style="background-color: red; width: 36px; color: white;"></i>
                            </div>
                        </div>
                    </li>
                </ul>
            </div>

        </div>*@
    <!-- /filters -->
    @*<div class="custom-search-input-2 inner-2" style="width:20%">
            <div class="form-group">
                <input class="form-control" type="text" placeholder="Terms...">
                <i class="icon_search"></i>
            </div>
        </div>*@
    <div class="collapse" id="collapseMap">
        <div id="map" class="map"></div>
    </div>
    <!-- End Map -->

    <div class="container margin_60_35">
        <div class="row">
            <aside class="col-lg-3" id="sidebar">
                <div id="filters_col">
                    <a data-toggle="collapse" href="#collapseFilters" aria-expanded="false" aria-controls="collapseFilters" id="filters_col_bt">Filters </a>
                    <div class="collapse show" id="collapseFilters">
                        <div class="filter_type">
                            <h6>Service Types</h6>
                            <ul id="allservices">
                                <li>
                                    <label>
                                        <input type="checkbox" id="service" class="icheck">Hotel @*<small>(945)</small>*@
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">Banquet Hall @*<small>(45)</small>*@
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">Resort @*<small>(30)</small>*@
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">Convention Hall @*<small>(25)</small>*@
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">Function Hall @*<small>(56)</small>*@
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">OYO Banquets @*<small>(25)</small>*@
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">Catering @*<small>(56)</small>*@
                                    </label>
                                </li>
                            </ul>
                        </div>
                        <div class="filter_type">
                            <h6>Budget</h6>
                            <input type="text" id="range" name="range" value="">
                        </div>
                        <div class="filter_type">
                            <h6>Food Type</h6>
                            <ul>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">Vegetarian @*<small>(25)</small>*@
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">Non-Vegetarian @*<small>(26)</small>*@
                                    </label>
                                </li>
                            </ul>
                        </div>
                        <div class="filter_type">
                            <h6>Amenities</h6>
                            <ul>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">AC @*<small>(25)</small>*@
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">Wi-Fi @*<small>(26)</small>*@
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">TV
                                    </label>
                                </li>
                                <li>
                                    <label>
                                        <input type="checkbox" class="icheck">Parking Facility
                                    </label>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <!--/collapse -->
                </div>
                <!--/filters col-->
            </aside>
            <!-- /aside -->
            @*@{ Html.RenderAction("Loadmore", "results");}*@
            <input type="hidden" id="rcount" value="@ViewBag.count" />
            <div class="col-lg-9">
                <div class="isotope-wrapper">
                    <div class="row">
                        @foreach (var item in ViewBag.venues)
                        {
                            <div class="col-md-6 isotope-item popular">
                                <div class="box_grid">
                                    <figure>

                                        <a href="/viewservice">
                                       @if (item.logo != null)
                                       {
                                        <img src="~/vendorimages/@item.logo" class="img-fluid" alt="" width="800" height="533">
                                       }
                                       else if (item.image != null)
                                       {
                                        <img src="~/vendorimages/@item.image" class="img-fluid" alt="" width="800" height="533">
                                       }
                                       else
                                       {
                                        <img src="~/noimages.png" class="img-fluid" alt="" width="800" height="533">
                                       }
                                        <div class="read_more"><span>Read more</span></div></a>
                                        @*<small>20%CASH BACK</small>*@
                                    </figure>
                                    <div class="wrapper">

                                        <h3><a href="/viewservice">@item.BusinessName</a></h3>
                                        <div class="panel panel-default">
                                            <div class="ui segment">
                                                <p>
                                                    Veg price per plate
                                                    starts from &emsp;₹ @item.cost1
                                                </p>
                                                <p>
                                                    Non-Veg price per plate
                                                    starts from &emsp;₹ @item.cost2
                                                </p>
                                            </div>



                                        </div>
                                    </div>
                                    <ul>
                                        @*<li> 3 HALLS + 1 LAWN</li>*@
                                        <li><div class="score"><span>BOOK NOW</span></div></li>
                                    </ul>
                                </div>
                            </div>
                        <!-- /box_grid -->
                        }
                        @*<img id="loader" alt="" src="~/CSSWeb/ajax-loader.gif" style="display: none" />*@
                    </div>
                    <div class="row" id="allrecords"></div>
                        <!-- /row -->
                    </div>
                <!-- /isotope-wrapper -->

               @* <p class="text-center"><a href="#0" class="btn_1 rounded add_top_30">Load more</a></p>*@
            </div>

            <!-- /col -->
        </div>
    </div>
    <!-- /container -->




</main>

@section scripts{
    @*<script src="~/newdesignstyles/Scripts/jquery-2.2.4.min.js"></script>
        <script src="~/Scripts/jquery.easyPaginate.js"></script>*@
    @*<script src="//code.jquery.com/jquery-2.1.3.min.js"></script>
        <script src="//netdna.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script src="//raw.github.com/botmonster/jquery-bootpag/master/lib/jquery.bootpag.min.js"></script>
        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">*@
    <script>
        //$("#loadmore").click(function () {
        //    var tcount = $('#rcount').val();
        //    var url = '/results/Loadmore?count=' + tcount;
        //    $('#presults').empty().load(url);
        //});

        var pageIndex = 1;
        var pageCount;
        $(window).scroll(function () {
            if ($(window).scrollTop() == $(document).height() - $(window).height()) {
                //alert("Scroll");
                GetRecords();
                //$("#loader").show();
            }
        });
        function GetRecords() {
            pageIndex++;
            //if (pageIndex == 2 || pageIndex <= pageCount) {
                $("#loader").show();
                $.ajax({
                    type: "POST",
                    url: "results/Loadmore?count=" + pageIndex + "&&type=Venue",
                    data: $('#rcount').val(),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: OnSuccess,
                    failure: function (response) {
                        alert("Failed to Load data");
                    },
                    error: function (response) {
                        alert("Something went wrong!!! Try Again after sometime");
                    }
                });
            //}
        }
        function OnSuccess(response) {
           // alert("Data Loaded"); //allrecords
            $.each(response, function (key, value) {
                $("#allrecords").append("<div class='col-md-6 isotope-item popular'><div class='box_grid'><figure><a href='/viewservice'><img src='/vendorimages/" + value.image + "' class='img-fluid' alt='' width='800' height='533'> </a> </figure> <div class='wrapper'> <h3><a href='/viewservice'>" + value.BusinessName + "</a></h3> <div class='panel panel-default'> <div class='ui segment'> <p> Veg price per plate starts from &emsp;₹ " + value.cost1 + " </p> <p> Non-Veg price per plate starts from &emsp;₹ " + value.cost2 + " </p> </div> </div> </div> <ul> <li><div class='score'><span>BOOK NOW</span></div></li> </ul> </div> </div>");
            });
            //var xmlDoc = $.parseXML(response.d);
            //var xml = $(xmlDoc);
            //pageCount = parseInt(xml.find("PageCount").eq(0).find("PageCount").text());
            //var customers = xml.find("Customers");
            //customers.each(function () {
            //    var customer = $(this);
            //    var table = $("#dvCustomers table").eq(0).clone(true);
            //    $(".name", table).html(customer.find("ContactName").text());
            //    $(".city", table).html(customer.find("City").text());
            //    $(".postal", table).html(customer.find("PostalCode").text());
            //    $(".country", table).html(customer.find("Country").text());
            //    $(".phone", table).html(customer.find("Phone").text());
            //    $(".fax", table).html(customer.find("Fax").text());
            //    $("#dvCustomers").append(table).append("<br />");
            //});
            //$("#loader").hide();
        }

        // init bootpag
        //$('#easyPaginate').bootpag({
        //    total: 10
        //}).on("page", function(event, /* page number here */ num){
        //     $("#content").html("Insert content"); // some ajax content loading...
        //});


        //$('#easyPaginate').easyPaginate({
        //    paginateElement: 'div',
        //    elementsPerPage: 6
        //    //effect: 'climb'
        //});

        //$("input:checkbox.icheck").click(function () {
        //    if ($(this).is(":checked"))
        //        alert('you are unchecked ' + $(this).val());
        //});

        //function filtervendors(val) {
        //    alert(val);
        //    var url = '/results/Loadmore?type=' + val;
        //    $('#presults').empty().load(url);
        //}

        //$('.service').click(function () {
        //    alert("hi");
        //    var val = $(this).val();
        //    alert(val);
        //});

        //$("#allservices input:checkbox").on('change', function () {
        //    if ($(this).is(':checked'))
        //        alert('uncheckd ' + $(this).val());
        //});
    </script>
}