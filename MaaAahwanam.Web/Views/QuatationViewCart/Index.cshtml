@model MaaAahwanam.Models.CommentDetail
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/SharedWeb/DashBoardMaster.cshtml";
    var i = 0;
}
@section Navigation
{
<div class="breads">
    <div class="breads_inner">
        <div class="pageWidth">
            <div class="title">
                <h3>Quatation View Cart</h3>
            </div>
            <div class="breadcrumbs">
                <ul>
                    <li><a href="~/Index/Index">Home</a></li>
                    <li><i class="breads_arrow"></i></li>
                    <li><a href="~/Dashboard/Index">Dashboard</a></li>
                    <li><i class="breads_arrow"></i></li>
                    <li>Quatation View Cart</li>
                </ul>
            </div>
        </div>
    </div>
</div>
}

 <div class="dashInner">
        <div class="order-details">
            <h2>Quatation ID : <strong><span id="label" style="font-size:x-large"></span></strong></h2>
            <div class="clear"></div>
        </div>
        <!-- /order-details -->
        <!-- popup -->
        <div id="quatation" class="zoom-anim-dialog mfp-hide large-dialog">
            <div class="popup-box pop-content">
                <div class="popup-head">
                    <h3>Description &amp; Preferences</h3>
                </div>
                <!-- /popup-head -->
                <div class="popup-space popup-desc-space">
                    
                    <div class="dashboardList">
                        <table>
                            <thead>
                                <tr>
                                    <th style="width:100%">Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <p id="desc"></p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <table>
                            <thead>
                                <tr>
                                    <th style="width:100%">Preferences</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>
                                        <p id="pref"></p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div class="clear"></div>
                    </div>
                </div>
            </div>
        </div>
        <!-- /popup -->

        <div class="dashboardList dashboardList-nospace dashboardList-whitebg">
            <table class="responsive" id="mytable">
                <thead>
                    <tr>
                        <th style="width:5%">&nbsp;</th>
                        <th style="width:5%">S.No</th>
                        <th style="width:20%">Quatation ID</th>
                        <th style="width:18%">Date</th>
                        <th style="width:40%">Description</th>
                        <th style="width:12%">Budget</th>
                        <th style="width:12%">Amount</th>
                    </tr>
                </thead>
                
                <tbody>
                    @if (ViewBag.service != null)
                    {
                        foreach (var item in ViewBag.service)
                        {
                            <tr>
                                <td><input type="radio" name="quatation" /></td>
                                <td>@(++i)</td>
                                <td><a href="#quatation" onclick="displaypopup('@item.Description','@item.Preferences')" class="green-link ml-center popup-with-move-anim">@item.ResponseId</a></td>
                                <td>@item.UpdatedDate.ToShortDateString()</td>
                                <td>@item.Description</td>
                                <td>Rs.@item.Budget</td>
                                <td>Rs.@item.Amount</td>
                            </tr>
                        }
                    }
                    
                </tbody>
            </table>
            <div class="clear"></div>
        </div>
        <!-- /dashboardList -->
        <div class="price-information" style="display:none">
            <div class="total-price">
                <div class="price-desc">
                    <h6>Payment Terms & Conditions</h6>
                    <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries.</p>
                </div>
                <div class="price-info">
                    <table>
                        <tr>
                            <td style="width:55%;">Sub Total</td>
                            <td style="width:15%;" align="center">:</td>
                            <td style="width:30%;"><p id="price"></p></td>
                        </tr>
                        <tr>
                            <td>Tax</td>
                            <td align="center">:</td>
                            <td><p id="tax"></p></td>
                        </tr>
                        <tr>
                            <td><h5>Payble Total</h5></td>
                            <td align="center"><h5>:</h5></td>
                            <td><h5>1299.00</h5></td>
                        </tr>
                    </table>
                </div>
                <div class="clear"></div>
            </div>
            <!-- /total-price -->
            <div class="paid-amount">
                <h5>Advance Amount to be paid&nbsp;&nbsp;:&nbsp;&nbsp;Rs. 650.00</h5>
            </div>
            
            <div class="clear"></div>
        </div>
     <br/>
     <div class="pay-btn btn-right">
         <button class="btn btn-big btn-green" onclick="window.location.href='/Payment/Index';"><i class="ti-money"></i> Pay Now</button>
         <div class="clear"></div>
     </div>
        <!-- /price-information -->
     <br/><br/>
        <div class="comments-box">
            @*<form id="contact_form" class="form">*@
                @using (Html.BeginForm("Index", "QuatationViewCart", routeValues: new { id = @ViewBag.id }, method: FormMethod.Post)) //"index", "QuatationViewCart",new { @id="contact_from",@class="form"}
                {
                <ul id="contact_form" class="form">
                    <li class="full">
                        <label>Comments</label>
                        @Html.TextAreaFor(Model => Model.CommentDetails, new { @class = "form-control", placeholder = "Enter your comments here ...", @rows = "3" })
                        @*<textarea id="comments" name="comments" placeholder="Enter your comments here ..."></textarea>*@
                    </li>
                </ul>
                
                
                    <button class="btn btn btn-orange m-l-0 btn-right" type="submit" name="command" value="Submit"><i class="ti-thumb-up"></i> &nbsp;Submit</button>
                    //<input type="submit" value="Submit" class="btn btn btn-orange m-l-0 btn-right" name="command" />
                }
                <div class="clear"></div>
            @*</form>*@

            <div class="clear"></div>
        </div>
        <!-- /comments-box -->
        <div class="replyStyle comments m-t-30">
            <h2>Comments <span>(@ViewBag.commentscount)</span></h2>
            @if (ViewBag.comments != null)
            {
                foreach (var item in ViewBag.comments)
                {
                    <dl class="first-child">
                        <dt><img class="person" alt="img-profile1" src="~/CSSWeb/images/dashboard/img-profile1.jpg"></dt>
                        <dd>
                            <h5>@item.BusinessName</h5>
                            <p>@item.CommentDetails.</p>
                            <div class="cmntsPublish">
                                <ul>
                                    <li><i class="ti-time"></i><span>@item.UpdatedDate.ToShortDateString()</span></li>
                                </ul>
                            </div>
                        </dd>
                    </dl>
                }
            }
            @if (ViewBag.comments == null)
            {
                <dl>
                    <p>No Comments</p>
                </dl>
            }
            </div>
        <div class="clear"></div>

    </div>
    <!-- /dashInner -->

<script>
    //displays order id on page load
    window.onload = function () {
        var label = $("#label");
        var url = window.location.href;
        var id = url.substring(url.lastIndexOf('=') + 1);
        label.html(id);

    //    $('#mytable tbody tr').each(function () {
    //        var budget = $(this).find("td").eq(5).html();
    //        var amount = $("#price");
    //        var taxamount = $("#tax");
    //        //tax calculation
    //        var taxpercent = 0;
    //        var taxcalc = ((budget.substring(budget.indexOf(".") + 1))* taxpercent)/100;
    //        taxamount.html(taxcalc);
    //        amount.html(budget);
    //    });
    };
</script>

<script>
    //displays description and preference in modal popup
    function displaypopup(description, preference) {
        var desc = $("#desc");
        var pref = $("#pref");
        desc.html(description);
        pref.html(preference);
    }
</script>
