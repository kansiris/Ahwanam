@using MaaAahwanam.Web.Models
@model Tuple<MaaAahwanam.Models.UserLogin, MaaAahwanam.Models.Vendormaster>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/SharedWeb/NMasterPage.cshtml";
}

<form method="post">
    <div class="container-fluid questionery">
        <div class="row py-2 justify-content-center">
            <div class="col-12 col-sm-8 col-md-6 col-lg-6 bgWhite boxShadow margin-top-50 margin-bottom-50">
                
                <div class="row p-4">
                    <h3>Sign up</h3>
                    <div class="d-inline ml-auto questionsCount">
                        <span>1</span> / <span></span>
                    </div>

                    <div class="w-100 filteredQuestions">
                        <div class="w-100 mb-3 questions">
                            <div class="mb-2">
                                <div class="options">
                                    <div class="row mx-0 my-2">
                                        <div class="col-12 col-md-8 col-lg-8 offset-md-2 offset-lg-2">
                                            <div class="form-group w-100">
                                                <input type="text" class="form-control" name="Item2.ContactPerson" id="Item2_ContactPerson" placeholder="User Name" required>
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-8 col-lg-8 offset-md-2 offset-lg-2">
                                            <div class="form-group w-100">
                                                <select class="form-control" name="Item2.ServicType" id="Item2_ServicType" required>
                                                    <option disabled="disabled" value="" selected="selected">Serivice Type</option>
                                                    <option>Venue</option>
                                                    <option>Catering</option>
                                                    <option>Photography</option>
                                                    <option>Decorator</option>
                                                    <option>Mehendi</option>
                                                    <option>Pandit</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-8 col-lg-8 offset-md-2 offset-lg-2">
                                            <div class="form-group w-100">
                                                <input type="text" class="form-control" name="Item2.BusinessName" id="Item2_BusinessName" maxlength="50" placeholder="Business Name" required>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="w-100 mb-3 questions">
                            <div class="mb-2">
                                <div class="options">
                                    <div class="row mx-0 my-2">
                                        <div class="col-12 col-md-8 col-lg-8 offset-md-2 offset-lg-2">
                                            <div class="form-group w-100">
                                                <input type="text" class="form-control" name="Item2.EmailId" id="Item2_EmailId" onchange="check()" placeholder="E- Mail" required>
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-8 col-lg-8 offset-md-2 offset-lg-2">
                                            <div class="form-group w-100">
                                                <input type="number" class="form-control" name="Item2.ContactNumber" id="Item2_ContactNumber" placeholder="Mobile" required>
                                            </div>
                                        </div>
                                        <div class="col-12 col-md-8 col-lg-8 offset-md-2 offset-lg-2">
                                            <div class="form-group w-100">
                                                <input type="password" class="form-control" name="Item1.Password" id="Item1_Password" placeholder="Password" required>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="w-100 prevNext">
                        <div class="ml-auto">
                            <div class="d-inline-flex backQues">
                                <span class="btnSecondary">Back</span>
                            </div>
                            <div class="d-inline-flex">
                                <span class="themeBgColorPrimary btnSecondary text-white nextQues">Next</span>
                            </div>
                            <div class="d-inline-flex">
                                @*<span class="themeBgColorPrimary btnSecondary text-white continueBtn">Continue</span>*@
                                <button type="submit" class="themeBgColorPrimary btnSecondary text-white" name="command" value="VendorReg" id="Register"> Join Now </button>
                            </div>
                        </div>
                    </div>
                    <p>Already have an Account ?<a href="/NUserRegistration">Login</a></p>
                </div>
            </div>
        </div>
    </div>
</form>

@section scripts{
    <script type="text/javascript">
        $(document).ready(function () {
            $('body').attr("id", "userAuthentication");
        });
        $('.container').hide();
        $('.search').hide();

        function ValidateEmail(email) {
            var expr = /^[_a-z0-9-]+(\.[_a-z0-9-]+)*@@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/;
            return expr.test(email);
        };
        function check() {
            var emailId = $("#Item2_EmailId").val();
            //alert(emailId);
            if (!ValidateEmail(emailId)) {
                alert("Invalid email address.");
            }
            else {
                $.ajax({
                    url: '/SampleStorefront/checkemail',
                    type: 'POST',
                    data: JSON.stringify({ emailid: emailId }),
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (data) {
                        if (data == "exists") {
                            alert("E-Mail ID Already Taken!!! Try Another");
                            $("#Item2_EmailId").val("").focus();
                            //$("#Item2_EmailId").focus();
                        }
                    },
                    error: function (data)
                    { alert("Server is Not Responding at the Moment"); }
                });
            }

        }

        //$('#Register').click(function () {
        //    var username = $('#Item2_ContactPerson').val();
        //    var stype = $('#Item2_ServicType').val();
        //    var bname = $('#Item2_BusinessName').val();
        //    var email = $('#Item2_EmailId').val();
        //    var mobile = $('#Item2_ContactNumber').val();
        //    var password = $('#Item1_Password').val();
        //    if (username.trim() == '') {
        //        alert("Enter Your Name");
        //        $('#Item2_ContactPerson').focus();
        //    }
        //    else if(stype.trim() == ''){
        //        alert("Select Service Type");
        //    }
        //    else if (bname.trim() == '') {
        //        alert("Enter Business Name");
        //        $('#Item2_BusinessName').focus();
        //    }
        //    else if (email.trim() == '') {
        //        alert("Enter Email ID");
        //        $('#Item2_EmailId').focus();
        //    }
        //    else if (mobile.trim() == '') {
        //        alert("Enter Mobile Number");
        //        $('#Item2_ContactNumber').focus();
        //    }
        //    else if (password.trim() == '') {
        //        alert("Enter Password");
        //        $('#Item1_Password').focus();
        //    }
        //    else {
        //        this.form.submit();
        //    }
        //});
    </script>


    <script>
        $(document).ready(function () {
            var questions = $(".filteredQuestions > .questions");
            var questionsLen = $(".filteredQuestions > .questions").length;
            var questionMin = $(".questionsCount > span:first-child");
            var questionMinCount = parseInt($(".questionsCount > span:first-child").text());
            var questionMax = $(".questionsCount > span:last-child");
            $(questionMax).empty().append(questionsLen);
            $(".prevNext .backQues").css("visibility", "hidden");
            $(".filteredQuestions").children().eq(questionMinCount - 1).css("display", "block");

            /*---- Click Continue button then append selected categories P Tag to --*/
            var hiddenP = $("<p class='hiddenP'></p>");
            $(hiddenP).insertAfter(".question + .options ul");
            /*---- Click Continue button then append selected categories P Tag to --*/

            $(".prevNext .backQues").click(function () {
                questionMinCount--;
                if (questionMinCount > 1) {
                    $(questionMin).empty().append(questionMinCount);
                    $(".filteredQuestions").children().css("display", "none");
                    $(".filteredQuestions").children().eq(questionMinCount - 1).css("display", "block");
                    $(".prevNext .nextQues").css("display", "block");
                    $(".prevNext .continueBtn").css("display", "none");
                } else if (questionMinCount == 1) {
                    $(questionMin).empty().append(questionMinCount);
                    $(".filteredQuestions").children().css("display", "none");
                    $(".filteredQuestions").children().eq(questionMinCount - 1).css("display", "block");
                    $(this).css("visibility", "hidden");
                    $(".prevNext .nextQues").css("display", "block");
                    $(".prevNext .continueBtn").css("display", "none");
                }
            });

            $(".prevNext .nextQues").click(function () {
                /*--$('.filteredQuestions .questions').each(function(){
                  if($(this).css('display') == 'block'){
                    $(this).find('input').each(function(){
                      if($(this).val().length == 0){
                        alert("empty");
                      }
                    });
                    alert('block');
                  }
                 });--*/
                questionMinCount++;
                if (questionMinCount < questionsLen) {
                    $(questionMin).empty().append(questionMinCount);
                    $(".filteredQuestions").children().css("display", "none");
                    $(".filteredQuestions").children().eq(questionMinCount - 1).css("display", "block");
                    $(".prevNext .backQues").css("visibility", "visible");
                } else if (questionMinCount == questionsLen) {
                    $(questionMin).empty().append(questionMinCount);
                    $(".filteredQuestions").children().css("display", "none");
                    $(".filteredQuestions").children().eq(questionMinCount - 1).css("display", "block");
                    $(this).css("display", "none");
                    $(".prevNext .backQues").css("visibility", "visible");
                    $(".prevNext .continueBtn").css("display", "block");
                }
            });

            $(".prevNext .continueBtn").click(function () {
                alert("Redirect");

                /*---- Click Continue button then append selected categories P Tag to --*/
                $(".filteredQuestions > .questions:last-of-type .options > ul").next('p').empty();
                $(".filteredQuestions > .questions:last-of-type .options > ul > li").each(function () {
                    if ($(this).find("input[type='checkbox']").is(':checked')) {
                        var checkText = $(this).find('p').text();
                        $(".filteredQuestions > .questions:last-of-type .options > ul").next('p').append(checkText + ", ");
                    }
                });
                /*---- Click Continue button then append selected categories P Tag to --*/

            });

        });

        $(document).ready(function () {
            $('body').attr("id", "userAuthentication");
        });

    </script>

}